[gd_scene load_steps=36 format=3 uid="uid://mdes4hst2fpb"]

[ext_resource type="Script" uid="uid://ylp6vydxbh2w" path="res://entities/info/player.gd" id="1_merdl"]
[ext_resource type="PackedScene" uid="uid://d16mvtftr8jl7" path="res://components/health_component.tscn" id="2_quc4t"]
[ext_resource type="PackedScene" uid="uid://crqe2dumssey" path="res://assets/raw/arms.blend" id="3_2hcst"]
[ext_resource type="Texture2D" uid="uid://ctatlt4v5fyf8" path="res://assets/crosshair.png" id="3_otayu"]
[ext_resource type="PackedScene" uid="uid://lm36snfl5obu" path="res://components/hitbox_component.tscn" id="3_ug0ox"]
[ext_resource type="PackedScene" uid="uid://ddemxbua6ylaj" path="res://components/audio_manager_component.tscn" id="4_ug0ox"]
[ext_resource type="PackedScene" uid="uid://ccvm8eicw8t4d" path="res://components/common_physics_component.tscn" id="5_quc4t"]

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_w3576"]
animation = &"Block"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_2hcst"]
animation = &"Die"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_o6ig1"]
animation = &"FistsUp"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_vndai"]
animation = &"Parry"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_hn42q"]
animation = &"Point"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_dt56t"]
animation = &"PunchL"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_ovxsc"]
animation = &"PunchR"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_vndai"]
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_tdjdb"]
advance_mode = 2
advance_expression = "parry_active"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_3544y"]
advance_mode = 2
advance_expression = "block_active"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_ovxsc"]
advance_mode = 2
advance_expression = "false"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_dt56t"]
advance_mode = 2
advance_expression = "!block_active"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_p22qk"]
advance_mode = 2
advance_expression = "!parry_active"

[sub_resource type="Curve" id="Curve_tdjdb"]
_data = [Vector2(0, 0), 0.0, 0.0, 0, 0, Vector2(1, 1), 0.0, 0.0, 0, 0]
point_count = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_ion2h"]
xfade_time = 1.0
xfade_curve = SubResource("Curve_tdjdb")
advance_mode = 2
advance_expression = "dead"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_2hcst"]
advance_mode = 2
advance_expression = "!dead"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_vtr80"]
xfade_time = 0.2
advance_mode = 2
advance_expression = "is_punching"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_gcvfo"]
switch_mode = 2
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_y5jtf"]
xfade_time = 0.25
switch_mode = 1
advance_mode = 2
advance_expression = "is_punching"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_526oe"]
xfade_time = 0.25
switch_mode = 1
advance_mode = 2
advance_expression = "is_punching"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_x73ai"]
xfade_time = 1.0
switch_mode = 2
advance_mode = 2
advance_expression = "false"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_0smle"]
xfade_time = 0.2
advance_mode = 2
advance_expression = "dead"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_4flry"]
xfade_time = 0.2
advance_mode = 2
advance_expression = "dead"

[sub_resource type="AnimationNodeStateMachine" id="AnimationNodeStateMachine_yfdjf"]
states/Block/node = SubResource("AnimationNodeAnimation_w3576")
states/Block/position = Vector2(422, 178)
states/Die/node = SubResource("AnimationNodeAnimation_2hcst")
states/Die/position = Vector2(798, 65)
states/End/position = Vector2(940, 100)
states/FistsUp/node = SubResource("AnimationNodeAnimation_o6ig1")
states/FistsUp/position = Vector2(422, 65)
states/Parry/node = SubResource("AnimationNodeAnimation_vndai")
states/Parry/position = Vector2(452, -52)
states/Point/node = SubResource("AnimationNodeAnimation_hn42q")
states/Point/position = Vector2(678, 2)
states/PunchL/node = SubResource("AnimationNodeAnimation_dt56t")
states/PunchL/position = Vector2(629, 235)
states/PunchR/node = SubResource("AnimationNodeAnimation_ovxsc")
states/PunchR/position = Vector2(624, 139)
states/Start/position = Vector2(209, 100)
transitions = ["Start", "FistsUp", SubResource("AnimationNodeStateMachineTransition_vndai"), "FistsUp", "Parry", SubResource("AnimationNodeStateMachineTransition_tdjdb"), "FistsUp", "Block", SubResource("AnimationNodeStateMachineTransition_3544y"), "FistsUp", "Point", SubResource("AnimationNodeStateMachineTransition_ovxsc"), "Block", "FistsUp", SubResource("AnimationNodeStateMachineTransition_dt56t"), "Parry", "FistsUp", SubResource("AnimationNodeStateMachineTransition_p22qk"), "FistsUp", "Die", SubResource("AnimationNodeStateMachineTransition_ion2h"), "Die", "FistsUp", SubResource("AnimationNodeStateMachineTransition_2hcst"), "FistsUp", "PunchR", SubResource("AnimationNodeStateMachineTransition_vtr80"), "PunchR", "FistsUp", SubResource("AnimationNodeStateMachineTransition_gcvfo"), "PunchR", "PunchL", SubResource("AnimationNodeStateMachineTransition_y5jtf"), "PunchL", "PunchR", SubResource("AnimationNodeStateMachineTransition_526oe"), "PunchL", "FistsUp", SubResource("AnimationNodeStateMachineTransition_x73ai"), "PunchR", "Die", SubResource("AnimationNodeStateMachineTransition_0smle"), "PunchL", "Die", SubResource("AnimationNodeStateMachineTransition_4flry")]
graph_offset = Vector2(130, -77)

[sub_resource type="CylinderShape3D" id="CylinderShape3D_merdl"]
height = 2.1

[sub_resource type="LabelSettings" id="LabelSettings_otayu"]
line_spacing = 0.0
font_size = 64
outline_size = 16
outline_color = Color(0, 0, 0, 1)

[sub_resource type="LabelSettings" id="LabelSettings_ug0ox"]
font_size = 32
outline_size = 8
outline_color = Color(0, 0, 0, 1)

[sub_resource type="CylinderShape3D" id="CylinderShape3D_tdjdb"]
height = 2.1

[node name="Player" type="CharacterBody3D"]
collision_layer = 4
collision_mask = 11
floor_constant_speed = true
script = ExtResource("1_merdl")
speed = 1.5
metadata/_custom_type_script = "uid://88pbfyfqnxlk"

[node name="AnimationTree" type="AnimationTree" parent="."]
unique_name_in_owner = true
root_node = NodePath("%arms")
tree_root = SubResource("AnimationNodeStateMachine_yfdjf")
advance_expression_base_node = NodePath("..")
anim_player = NodePath("../Camera3D/arms/AnimationPlayer")

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.05, 0)
shape = SubResource("CylinderShape3D_merdl")

[node name="Camera3D" type="Camera3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.75, 0)
current = true
fov = 90.0

[node name="arms" parent="Camera3D" instance=ExtResource("3_2hcst")]
unique_name_in_owner = true
transform = Transform3D(0.5, 0, 0, 0, 0.5, 0, 0, 0, 0.5, 0, -0.494629, -0.650644)

[node name="Skeleton3D" parent="Camera3D/arms/Armature" index="0"]
bones/0/position = Vector3(1, 0, 0)
bones/1/rotation = Quaternion(0.370375, -0.17656, -0.728077, 0.549138)
bones/2/rotation = Quaternion(0.0786294, 0.0302923, 0.00163159, 0.996442)
bones/3/rotation = Quaternion(0.658599, 0.180496, 0.549881, 0.480935)
bones/4/rotation = Quaternion(-0.035161, 0.501273, -0.100672, 0.858693)
bones/5/position = Vector3(0.159396, 0.493136, 0.00309017)
bones/5/rotation = Quaternion(-0.800785, -0.00133339, -5.21923e-05, 0.59895)
bones/5/scale = Vector3(1, 1, 1)
bones/6/rotation = Quaternion(-0.817308, -0.00744379, 0.00527117, 0.576129)
bones/7/position = Vector3(-0.00945312, 0.47449, -0.0383474)
bones/7/rotation = Quaternion(-0.800785, -0.00133326, -5.23362e-05, 0.59895)
bones/7/scale = Vector3(1, 1, 1)
bones/8/rotation = Quaternion(-0.816, 0.00842449, -0.00589979, 0.57796)
bones/9/position = Vector3(-0.158569, 0.471269, -0.0457486)
bones/9/rotation = Quaternion(-0.800785, -0.00133322, -5.24666e-05, 0.59895)
bones/10/rotation = Quaternion(-0.815717, -0.0032011, 0.00230279, 0.578438)
bones/11/rotation = Quaternion(-0.116763, 0.0322697, 0.14224, 0.982391)
bones/12/rotation = Quaternion(-0.10221, -0.0295874, -0.109372, 0.988289)
bones/13/rotation = Quaternion(-0.103908, 0.165096, -0.224127, 0.954837)
bones/15/rotation = Quaternion(0.357004, 0.183406, 0.704171, 0.585708)
bones/16/rotation = Quaternion(0.093944, -0.0479553, 0.0499806, 0.993165)
bones/17/rotation = Quaternion(0.658747, -0.182575, -0.548622, 0.481385)
bones/18/rotation = Quaternion(-0.035161, -0.501273, 0.100672, 0.858693)
bones/19/position = Vector3(-0.159395, 0.493136, 0.00309002)
bones/19/rotation = Quaternion(-0.800785, 0.00133337, 5.21811e-05, 0.59895)
bones/20/rotation = Quaternion(-0.817308, 0.00744379, -0.00527115, 0.576129)
bones/21/position = Vector3(0.00945329, 0.47449, -0.0383476)
bones/21/rotation = Quaternion(-0.800785, 0.00133324, 5.23035e-05, 0.59895)
bones/22/rotation = Quaternion(-0.816, -0.00842446, 0.00589979, 0.57796)
bones/23/position = Vector3(0.158569, 0.471269, -0.0457488)
bones/23/rotation = Quaternion(-0.800785, 0.00133321, 5.24622e-05, 0.59895)
bones/24/rotation = Quaternion(-0.815717, 0.00320109, -0.0023028, 0.578438)
bones/25/rotation = Quaternion(-0.116763, -0.0322698, -0.14224, 0.982391)
bones/26/rotation = Quaternion(-0.10221, 0.0295874, 0.109372, 0.988289)
bones/27/rotation = Quaternion(-0.103908, -0.165096, 0.224127, 0.954837)

[node name="HUD" type="CanvasLayer" parent="."]

[node name="Control" type="Control" parent="HUD"]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
size_flags_horizontal = 4
size_flags_vertical = 4

[node name="Crosshair" type="TextureRect" parent="HUD/Control"]
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -2.5
offset_top = -2.5
offset_right = 2.5
offset_bottom = 2.5
grow_horizontal = 2
grow_vertical = 2
scale = Vector2(4, 4)
pivot_offset = Vector2(2.5, 2.5)
texture = ExtResource("3_otayu")

[node name="HealthText" type="Label" parent="HUD/Control"]
layout_mode = 1
anchors_preset = -1
anchor_left = 0.5
anchor_top = 1.0
anchor_right = 0.5
anchor_bottom = 1.0
offset_left = -256.0
offset_top = -184.0
offset_right = -128.0
offset_bottom = -96.0
grow_horizontal = 2
grow_vertical = 2
text = "100"
label_settings = SubResource("LabelSettings_otayu")
horizontal_alignment = 1
vertical_alignment = 2

[node name="BlockText" type="Label" parent="HUD/Control"]
layout_mode = 1
anchors_preset = -1
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -96.0
offset_top = 28.0
offset_right = 96.0
offset_bottom = 76.0
grow_horizontal = 2
grow_vertical = 0
label_settings = SubResource("LabelSettings_ug0ox")
horizontal_alignment = 1

[node name="PunchText" type="Label" parent="HUD/Control"]
layout_mode = 1
anchors_preset = -1
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -96.0
offset_top = 84.0
offset_right = 96.0
offset_bottom = 132.0
grow_horizontal = 2
grow_vertical = 0
label_settings = SubResource("LabelSettings_ug0ox")
horizontal_alignment = 1

[node name="CommonPhysicsComponent" parent="." instance=ExtResource("5_quc4t")]

[node name="AudioManagerComponent" parent="." instance=ExtResource("4_ug0ox")]

[node name="HealthComponent" parent="." instance=ExtResource("2_quc4t")]
iframes_amount = 15

[node name="HitboxComponent" parent="." instance=ExtResource("3_ug0ox")]

[node name="CollisionShape3D" type="CollisionShape3D" parent="HitboxComponent"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.05, 0)
shape = SubResource("CylinderShape3D_tdjdb")

[editable path="Camera3D/arms"]
